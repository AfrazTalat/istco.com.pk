import{a8 as F,C as A,L as M,q as R,k,s as H,x as U,d as V,y as j,a3 as S,o as v,c as _,b as I,e as h,F as q,r as D,l as X}from"./entry.8386a641.js";import{_ as z,P as G}from"./Pagination.c256d5c1.js";import{L as J}from"./loader.bbe813a0.js";import{u as K}from"./products.755ff10f.js";var Q=/\s/;function Y(e){for(var t=e.length;t--&&Q.test(e.charAt(t)););return t}var Z=/^\s+/;function ee(e){return e&&e.slice(0,Y(e)+1).replace(Z,"")}var P=0/0,te=/^[-+]0x[0-9a-f]+$/i,ne=/^0b[01]+$/i,re=/^0o[0-7]+$/i,ae=parseInt;function B(e){if(typeof e=="number")return e;if(F(e))return P;if(A(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=A(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=ee(e);var n=ne.test(e);return n||re.test(e)?ae(e.slice(2),n?2:8):te.test(e)?P:+e}var ie=function(){return M.Date.now()};const T=ie;var oe="Expected a function",se=Math.max,ce=Math.min;function ue(e,t,n){var i,s,c,u,o,f,l=0,m=!1,r=!1,g=!0;if(typeof e!="function")throw new TypeError(oe);t=B(t)||0,A(n)&&(m=!!n.leading,r="maxWait"in n,c=r?se(B(n.maxWait)||0,t):c,g="trailing"in n?!!n.trailing:g);function x(a){var d=i,p=s;return i=s=void 0,l=a,u=e.apply(p,d),u}function W(a){return l=a,o=setTimeout(y,t),m?x(a):u}function O(a){var d=a-f,p=a-l,E=t-d;return r?ce(E,c-p):E}function L(a){var d=a-f,p=a-l;return f===void 0||d>=t||d<0||r&&p>=c}function y(){var a=T();if(L(a))return b(a);o=setTimeout(y,O(a))}function b(a){return o=void 0,g&&i?x(a):(i=s=void 0,u)}function $(){o!==void 0&&clearTimeout(o),l=0,i=f=s=o=void 0}function w(){return o===void 0?u:b(T())}function C(){var a=T(),d=L(a);if(i=arguments,s=this,f=a,d){if(o===void 0)return W(f);if(r)return clearTimeout(o),o=setTimeout(y,t),x(f)}return o===void 0&&(o=setTimeout(y,t)),u}return C.cancel=$,C.flush=w,C}const pe=R("categories",()=>{const e=k(H),t=U(e,"commons/categories");return{categories:e,fetchCategories:()=>t.fetch()}});function N(e){let t,n=e[0],i=1;for(;i<e.length;){const s=e[i],c=e[i+1];if(i+=2,(s==="optionalAccess"||s==="optionalCall")&&n==null)return;s==="access"||s==="optionalAccess"?(t=n,n=c(n)):(s==="call"||s==="optionalCall")&&(n=c((...u)=>n.call(t,...u)),t=void 0)}return n}const le={key:0,class:"row"},he=V({__name:"ProductCategoryList",props:{categoryId:{},featured:{type:Boolean,default:!1},search:{}},async setup(e){let t,n;const i=e,s=K(),c=k(!0),u=k();u.value=([t,n]=j(()=>s.fetchProducts({category_id:i.categoryId}).finally(()=>c.value=!1)),t=await t,n(),t);const o=(l=1,m)=>{c.value||(c.value=!0,s.fetchProducts({page:l,search:m,category_id:i.categoryId}).then(r=>{u.value=r}).finally(()=>c.value=!1))},f=ue(l=>{o(1,l)},500);return S(()=>i.categoryId,l=>o()),S(()=>i.search,l=>f(l)),(l,m)=>(v(),_("div",null,[I(J,{loading:h(c)},null,8,["loading"]),h(c)?X("",!0):(v(),_("div",le,[(v(!0),_(q,null,D(N([h,"call",r=>r(u),"optionalAccess",r=>r.list]),(r,g)=>(v(),_("div",{class:"col-lg-3 col-12 mb-5 px-1",key:g},[I(z,{product:r},null,8,["product"])]))),128))])),I(G,{pagination:N([h,"call",r=>r(u),"optionalAccess",r=>r.pagination]),loading:h(c),"onUpdate:page":m[0]||(m[0]=r=>o(r))},null,8,["pagination","loading"])]))}});export{he as _,pe as u};
